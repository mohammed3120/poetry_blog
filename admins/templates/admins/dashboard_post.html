{% extends 'dashboardBase.html' %}
{% load static %}

{% block title %}
    | object 
{% endblock title %}
   

{% block style %}
    <link rel="stylesheet" href="{% static 'css/dashboard_object_style.css' %}">
{% endblock style %}

{% block content %}
<div class="viewed_object">
            <h2 class="object_title">{{object.title}}</h2> <span class="object_created_date">{{object.created}}</span> 
            
            <p class="object_body">
              {{object.text}}
            </p>
            <div class="object_statstics">
              <span class="likes_number">{% if object.get_likes.count != 0 %}{{ object.get_likes.count}} Likes {% endif %}</span><span class="comments_number">{% if object.get_comments.count != 0 %}{{ object.get_comments.count}} comments{% endif %}</span>
              
            </div>
            <div class="interactive">
            
              <div class="panel-group" id="accordion" roles="tablist" aria-multiselectable="true">
                <div class="panel panel-default">
                  <div class="panel-heading" roles="tab" id="heading-{{object.id}}">
                    <h4 class="panel-title">
                      <a  href="#"><i class="like_action  fa fa-thumbs-up fa-2x"> {% if request.user.username in object.get_users %}Liked{% else %}Like{% endif %}</i></a>
                     <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapse-{{object.id}}" aria-expanded="true" aria-controls="collapse-{{object.id}}" href="#"><i class="comment_action fa fa-commenting-o fa-2x"> Comment</i></a>
                     </a>
                    </h4>
                  </div>
                  <div id="collapse-{{object.id}}" class="panel-collapse collapse" roles="tabpanel" aria-labelledby="heading-{{object.id}}">
                    <div class="panel-body" id="{{object.id}}">
                      <!--Start comment list and replies-->
                      {% for comment in object.get_comments %}
                      <div class="panel-group accordion_comment" id="accordion-comment" roles="tablist" aria-multiselectable="true">
                        <div class="panel panel-default">
                          <div class="panel-heading panel-heading-reply" roles="tab" id="comment-{{comment.id}}-object-{{object.id}}"> 
                              <div class="comment">
                                <span class="user_name">{{comment.profile.user.username}} </span>:
                                <p class="comment_body">{{comment.body}} <a style="float: right; border-radius: 50%; margin-bottom: 5px;" href="" class="btn btn-danger">Del</a></p>
                              </div>
                              
                            <div class="comment_replies">
                              <!--Start replies list-->
                              <div class="panel-group accordion_comment_replies" id="accordion-{{object.id}}-comment-{{comment.id}}-replies" roles="tablist" aria-multiselectable="true">
                                <div class="panel panel-default">
                                  <div class="panel-heading panel-heading-reply" roles="tab" id="object-{{object.id}}-comment-{{comment.id}}-replies">
                                    
                                    <h4 class="panel-title">
                                      <a class="collapsed" data-toggle="collapse" data-parent="#accordion-{{object.id}}-comment-{{comment.id}}-replies" href="#collapse-{{object.id}}-replies-{{comment.id}}" aria-expanded="true" aria-controls="collapse-{{object.id}}-{{comment.id}}" href="#"><span class="comment_replies_number">{% if comment.get_replies.count != 0 %}{{comment.get_replies.count}} replies{% endif %}</span>
                                      </a>
                                    </h4>
                                  </div>
                                  <div id="collapse-{{object.id}}-replies-{{comment.id}}" class="panel-collapse collapse" roles="tabpanel" aria-labelledby="object-{{object.id}}-comment-{{comment.id}}-replies">
                                    <div class="panel-body">
                                    {% for reply in comment.get_replies %}
                                      <div class="reply">
                                        <span class="user_name">{{reply.profile.user.username}}</span>:
                                        <p class="reply_body">{{reply.body}}</p>
                                      </div>  
                                    {% endfor %}                                  
                                    </div>
                                  </div>
                                </div>
                              </div>
                              <!--Start replies list-->
                            </div>
                            <h4 class="panel-title">
                             <a class="collapsed" data-toggle="collapse" data-parent="#accordion-comment" href="#collapse-{{object.id}}-{{comment.id}}-reply" aria-expanded="true" aria-controls="collapse-{{object.id}}-{{comment.id}}" href="#"><i class="reply_action fa fa-reply"> reply</i></a>
                              </a>
                            </h4>
                          </div>
                          <div id="collapse-{{object.id}}-{{comment.id}}-reply" class="panel-collapse collapse" roles="tabpanel" aria-labelledby="comment-{{comment.id}}-object-{{object.id}}">
                            <div class="panel-body">
                               
                              <!--start reply form-->
                                <form action="#" method="object" class="form-inline">
                                  <input class="form-control" type="text" name="reply" placeholder="Write reply here.."><button class="btn btn-danger"></i>reply</button>
                                </form>
                              <!--end reply form-->
                            </div>
                          </div>
                        </div>
                      </div>
                      {% endfor %}
                      <!--End comment list and replies-->
                      <!--start comment form-->
                        <form action="#" method="object" class="form-inline">
                          <input class="form-control" type="text" name="comment" placeholder="Write comment here.."><button id="comment_action_{{object.id}}" type="submit" class="btn btn-danger"></i>comment</button>
                        </form>
                      <!--end comment form-->
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
{% endblock content %}

{% block script %}
<script type="text/javascript" src="{% static 'js/jquery-3.5.1.min.js' %}"></script>
     <script src="{% static 'js/bootstrap.min.js' %}"></script>
     <script src="{% static 'js/myscript.js' %}"></script>
     <script src="{% static 'js/post_interactive.js' %}"></script>
{% endblock script %}